/home/rasmus/Skrivebord/grover/OpenCorePkg-1.0.6-source/OpenCorePkg-1.0.6/Legacy/BootPlatform/BdsDxe/BdsEntry.c

#ÆNDR:

    DevicePath = FileDevicePath (
                   FileSystemHandles[Index],
                   L"\\EFI\\OC\\OpenCore.efi"
                   );
                   
--------------------------------------------------

Find i DxeMain() omkring de linjer du nævnte (ca. 469+). Du har i dag noget ala:

BdsBootDeviceSelect (TRUE);

gST->ConOut->OutputString (gST->ConOut, L"BOOT MISMATCH!\r\n");
gBS->Stall (3000000);

BdsBootDeviceSelect (FALSE);


Erstat med dette:

//
// We always boot via BIOS/GRUB chainloading. The Boot0/Boot1 disk-signature
// contract is not reliable in this mode, so skip RequireValidDisk gating.
//
BdsBootDeviceSelect (FALSE);
                   
                   
-------------------BUILD-------------------------

0) Forudsætninger (kun hvis mangler)
sudo apt update

Opdater pakkeindeks
sudo apt install -y build-essential git nasm uuid-dev iasl python3

Toolchain + NASM + UUID + IASL (ACPI compiler) + Python

(På nogle distros hedder iasl-pakken acpica-tools i stedet for iasl — men på Ubuntu plejer iasl at være fin.)

1) Gå ind i dit build-setup

Jeg antager din mappe hedder præcis sådan her (du bruger den allerede):

cd /home/rasmus/Skrivebord/grover/oc-duet-build/UDK

Gå ind i UDK/EDK2-workspace (det er her Build/ ender med at ligge)
2) (Hvis repo/submodules) sørg for at alt er hentet

Hvis din UDK mappe er et repo der bruger submodules:

git submodule update --init --recursive

Henter EDK2 dependencies (kun nødvendigt hvis det ikke allerede er gjort)
3) Sæt EDK2 build-miljø op

I UDK-workspace kører man typisk edksetup.sh:

source edksetup.sh

Sætter WORKSPACE og gør BaseTools/build-kommando tilgængelig
4) Byg BaseTools (nødvendigt første gang)
make -C BaseTools

Kompilerer EDK2’s build-tools (kræves før “build” virker stabilt)
5) Byg OpenDuetPkg (det der producerer filen “boot”)

Det er denne kommando der giver din præcise output-sti:

build -a X64 -b RELEASE -t GCC -p OpenDuetPkg/OpenDuetPkg.dsc

Bygger DUET payload for X64 i RELEASE med GCC toolchain

Hvis du vil tvinge “clean” (så du er sikker på ingen gamle artefakter blander sig):

build -a X64 -b RELEASE -t GCC -p OpenDuetPkg/OpenDuetPkg.dsc -n 0 clean

Rydder build output (clean)

…og så build igen:

build -a X64 -b RELEASE -t GCC -p OpenDuetPkg/OpenDuetPkg.dsc

Ny frisk build
6) Verificér at “boot”-filen findes hvor vi forventer
ls -lah Build/OpenDuetPkg/RELEASE_GCC/X64/boot

Skal vise den DUET “boot” vi kopierer til /boot på USB

Og check gerne størrelse/hash (til sammenligning mellem builds):

stat -c '%s bytes  %n' Build/OpenDuetPkg/RELEASE_GCC/X64/boot
